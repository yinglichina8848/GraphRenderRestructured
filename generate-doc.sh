#!/bin/bash
# æ–‡ä»¶å: generate-docs.sh
# ç”¨æ³•: ./generate-docs.sh

DOC_DIR="doc"
SRC_DIR="src"

mkdir -p "$DOC_DIR"

echo "ğŸ“¦ æ­£åœ¨å¯åŠ¨ Aider æ–‡æ¡£ç”Ÿæˆä»»åŠ¡..."

# å¯åŠ¨ Aider å¹¶æ‰§è¡Œæ‰¹é‡æ“ä½œ
aider --model=deepseek/deepseek-coder:instruct \
--system-message "ä½ æ˜¯ä¸€ä¸ªç»éªŒä¸°å¯Œçš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œè¯·æ ¹æ® Java é¡¹ç›®ä»£ç è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„æ–‡æ¡£ã€‚" \
--input-files "$SRC_DIR/**/*.java" << 'EOF'

è¯·å®Œæˆä»¥ä¸‹æ–‡æ¡£ç”Ÿæˆä»»åŠ¡ï¼Œå¹¶å°†ç»“æœå†™å…¥ doc ç›®å½•ä¸‹ï¼š

1. **doc/architecture.md**  
   - æè¿°ç³»ç»Ÿæ•´ä½“æ¶æ„ï¼šæ¨¡å—åˆ’åˆ†ã€èŒè´£è¯´æ˜
   - ä½¿ç”¨ Mermaid ç”»å‡ºä¸»è¦æ¨¡å—è°ƒç”¨æµç¨‹å›¾

2. **doc/api.md**  
   - ä¸ºæ‰€æœ‰ Java ç±»ç”Ÿæˆ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬æ–¹æ³•è¯´æ˜ã€å‚æ•°å’Œè¿”å›å€¼
   - æ–‡æ¡£æ ¼å¼ä¸º Markdownï¼Œé€‚åˆå¼€å‘è€…æŸ¥é˜…

3. **doc/usage.md**  
   - å†™å‡ºé¡¹ç›®çš„ä½¿ç”¨è¯´æ˜ï¼ŒåŒ…æ‹¬ï¼šå¦‚ä½•è¿è¡Œä¸»ç±»ã€è¾“å…¥è¾“å‡ºæ ¼å¼ã€ç¤ºä¾‹å‘½ä»¤

4. **doc/install.md**  
   - è‡ªåŠ¨åˆ†ææ˜¯ Maven æˆ– Gradleï¼Œå¹¶ç”Ÿæˆå®‰è£…+æ„å»ºæ–‡æ¡£
   - åŒ…æ‹¬ä¾èµ–å®‰è£…ã€ç¼–è¯‘å‘½ä»¤ã€å¸¸è§é—®é¢˜ç­‰

5. **doc/changelog.md**  
   - å‡è®¾æœ‰ v0.1ã€v0.2ã€v1.0 ä¸‰ä¸ªé˜¶æ®µ
   - ä½¿ç”¨ Keep a Changelog é£æ ¼è¾“å‡ºåˆå§‹ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

6. **doc/contributing.md**  
   - ç¼–å†™è´¡çŒ®æŒ‡å—ï¼ŒåŒ…æ‹¬ Forkã€åˆ†æ”¯ç­–ç•¥ã€PR æµç¨‹ã€ä»£ç é£æ ¼è¦æ±‚

è¯·ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰ä»»åŠ¡ã€‚æ¯ä»½æ–‡æ¡£è¯·ç”¨ Markdown ç¼–å†™ï¼Œæ”¾å…¥ doc ç›®å½•ã€‚é¿å…è¦†ç›–å·²æœ‰ README.mdã€‚

EOF

echo "âœ… æ–‡æ¡£ç”Ÿæˆå®Œæˆï¼Œæ–‡ä»¶ä½äº ./$DOC_DIR/"

