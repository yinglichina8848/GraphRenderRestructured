name: ğŸš€ æ„å»ºå¹¶å‘å¸ƒæ–‡æ¡£åˆ° GitHub Pages

on:
  workflow_dispatch:  # æ‰‹åŠ¨è§¦å‘
  push:
    branches: [ main ]  # å¯ä¿®æ”¹ä¸ºä½ çš„ä¸»åˆ†æ”¯

jobs:
  build-and-publish:
    runs-on: ubuntu-latest

    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # GitHub è‡ªåŠ¨æ³¨å…¥ï¼Œæ— éœ€é…ç½®
      JAVA_HOME: /usr/lib/jvm/java-17-openjdk-amd64

    steps:
      - name: ğŸ§¾ æ£€å‡ºä»“åº“
        uses: actions/checkout@v4

      - name: â˜•ï¸ è®¾ç½® Java 17 ç¯å¢ƒ
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: 17

      - name: ğŸ§° å®‰è£…ä¾èµ–å·¥å…·
        run: |
          sudo apt-get update
          sudo apt-get install -y doxygen graphviz pandoc

      - name: ğŸ—ï¸ è¿è¡Œ publish.sh è„šæœ¬
        run: |
          chmod +x publish.sh
          ./publish.sh

